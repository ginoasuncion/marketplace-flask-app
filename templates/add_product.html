{% extends "layout.html" %}
{% block title %}Add Product{% endblock %}

{% block content %}
<!-- Flash Messages -->
{% with messages = get_flashed_messages(with_categories=true) %}
{% if messages %}
{% for category, message in messages %}
<div class="alert alert-{{ category }}">{{ message }}</div>
{% endfor %}
{% endif %}
{% endwith %}

<div class="container">
    <h1>Add Product</h1>
    <form method="post" action="{{ url_for('add_product') }}" enctype="multipart/form-data" class="dropzone"
        id="image-upload">
        <div class="form-group">
            <label for="name">Name:</label>
            <input type="text" id="name" name="name" class="form-control" required>
        </div>
        <div class="form-group">
            <label for="description">Description:</label>
            <textarea id="description" name="description" class="form-control" required></textarea>
        </div>
        <div class="form-group">
            <label for="price">Price:</label>
            <input type="number" id="price" name="price" class="form-control" required min="0" step="0.01">
        </div>
        <div class="form-group">
            <label for="image">Image:</label>
            <div class="fallback"
                style="border: 2px dashed #0087F7; padding: 20px; text-align: center; margin-bottom: 20px;">
                <input type="file" name="image" id="image" class="form-control" />
                Drag and drop your image here or click to select a file.
            </div>
        </div>
        <div class="form-group">
            <label for="contact_details">Contact Details:</label>
            <input type="text" id="contact_details" name="contact_details" class="form-control" required>
        </div>
        <div class="form-group">
            <strong>Tags:</strong>
            <select id="tags" name="tags[]" class="form-control" multiple="multiple">
                {% for tag in tags %}
                <option value="{{ tag.id }}">{{ tag.name }}</option>
                {% endfor %}
            </select>
        </div>
        <button type="button" onclick="history.back()" class="btn btn-secondary">Back</button>
        <input type="submit" value="Add Product" class="btn btn-primary">
    </form>
</div>

<link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css" rel="stylesheet" />
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js"></script>
<script>
    $(document).ready(function () {
        $('#tags').select2({
            placeholder: "Select tags",
            allowClear: true
        });
    });
</script>
{% endblock %}
